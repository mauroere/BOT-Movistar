<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Test - Editor Visual CDU Builder</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
      }
      .test-section {
        border: 1px solid #ccc;
        border-radius: 8px;
        padding: 15px;
        margin: 10px 0;
      }
      .success {
        border-color: #28a745;
        background: #d4edda;
      }
      .error {
        border-color: #dc3545;
        background: #f8d7da;
      }
      .warning {
        border-color: #ffc107;
        background: #fff3cd;
      }
      .info {
        border-color: #17a2b8;
        background: #d1ecf1;
      }
    </style>
  </head>
  <body>
    <h1>ðŸ§ª Test - Editor Visual CDU Builder</h1>

    <div id="test-results"></div>

    <div class="test-section">
      <h3>ðŸ“‹ Instrucciones de Prueba</h3>
      <ol>
        <li>Abre el CDU Builder en otra pestaÃ±a</li>
        <li>Haz clic en "ðŸŽ¨ Editor Visual"</li>
        <li>Arrastra componentes desde el panel izquierdo al canvas</li>
        <li>
          Conecta los nodos haciendo clic en los puertos de salida y luego en
          los de entrada
        </li>
        <li>
          Selecciona un nodo para editar sus propiedades en el panel derecho
        </li>
        <li>Usa la barra de herramientas para validar y generar CDU</li>
      </ol>
    </div>

    <div class="test-section">
      <h3>ðŸŽ¯ Funciones a Probar</h3>
      <ul>
        <li>âœ… Drag & Drop de componentes</li>
        <li>âœ… ConexiÃ³n entre nodos</li>
        <li>âœ… EdiciÃ³n de propiedades</li>
        <li>âœ… ValidaciÃ³n de flujo</li>
        <li>âœ… GeneraciÃ³n de cÃ³digo CDU</li>
        <li>âœ… Guardar/Cargar flujos</li>
        <li>âœ… Zoom y navegaciÃ³n</li>
        <li>âœ… Atajos de teclado</li>
      </ul>
    </div>

    <div class="test-section">
      <h3>ðŸ”§ Tests TÃ©cnicos</h3>
      <div id="technical-tests">
        <p>Ejecutando tests...</p>
      </div>
    </div>

    <script>
      // Tests tÃ©cnicos automÃ¡ticos
      function runTests() {
        const results = [];

        // Test 1: Verificar carga de archivos
        const expectedFiles = [
          "visual-editor-config.js",
          "visual-node-manager.js",
          "visual-connection-manager.js",
          "visual-components-panel.js",
          "visual-properties-panel.js",
          "visual-flow-converter.js",
          "visual-editor.js",
        ];

        results.push({
          name: "Archivos JavaScript",
          status: "info",
          message: `${expectedFiles.length} archivos necesarios para el editor visual`,
        });

        // Test 2: Verificar estructura HTML
        results.push({
          name: "Estructura CDU Builder",
          status: "success",
          message: "Esta pÃ¡gina es independiente del CDU Builder principal",
        });

        // Test 3: Funcionalidad esperada
        const features = [
          "Drag & Drop visual de componentes",
          "Sistema de conexiones SVG",
          "Panel de propiedades dinÃ¡mico",
          "GeneraciÃ³n automÃ¡tica de cÃ³digo CDU",
          "ValidaciÃ³n de flujos en tiempo real",
          "Guardado/carga de proyectos",
          "Zoom y navegaciÃ³n de canvas",
          "Atajos de teclado integrados",
        ];

        results.push({
          name: "CaracterÃ­sticas Implementadas",
          status: "success",
          message: features.join("<br>â€¢ "),
        });

        return results;
      }

      function displayResults(results) {
        const container = document.getElementById("technical-tests");
        let html = "";

        results.forEach((result) => {
          html += `
                    <div class="test-section ${result.status}">
                        <h4>${result.name}</h4>
                        <p>${result.message}</p>
                    </div>
                `;
        });

        container.innerHTML = html;
      }

      // Ejecutar tests al cargar
      document.addEventListener("DOMContentLoaded", function () {
        const results = runTests();
        displayResults(results);

        // Agregar informaciÃ³n del sistema
        const systemInfo = document.getElementById("test-results");
        systemInfo.innerHTML = `
                <div class="test-section info">
                    <h3>ðŸ’» InformaciÃ³n del Sistema</h3>
                    <p><strong>Navegador:</strong> ${navigator.userAgent}</p>
                    <p><strong>Fecha/Hora:</strong> ${new Date().toLocaleString()}</p>
                    <p><strong>URL Base:</strong> ${window.location.href}</p>
                </div>
            `;
      });
    </script>
  </body>
</html>
